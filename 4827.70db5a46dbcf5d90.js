"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4827],{4827:(O,g,d)=>{d.r(g),d.d(g,{HomePageModule:()=>v});var p=d(6895),i=d(5035),u=d(433),m=d(2598),a=d(6551),t=d(8256),f=d(5867);const h={databaseURL:"https://fednypost-default-rtdb.europe-west1.firebasedatabase.app"};let _=(()=>{class n{constructor(){this.app=(0,f.ZF)(h),this.database=(0,a.N8)(this.app)}writePostData(e,o){(0,a.t8)((0,a.iH)(this.database,"posts/"+e.id),e),this.writeNotificationData({message:`${e.title} has got ${o}`,created_at:(new Date).toLocaleString(),id:`${Math.floor(1e6*Math.random())}`,read:!1})}getPostData(e){return(0,a.iH)(this.database,"posts/"+e)}getPostsData(){return(0,a.IO)((0,a.iH)(this.database,"posts/"),(0,a.g2)("created_at"))}writeNotificationData(e){(0,a.t8)((0,a.iH)(this.database,"notifications/"+e.id),e)}setNotificationRead(e){(0,a.t8)((0,a.iH)(this.database,"notifications/"+e+"/read"),!0)}getNotificationData(e){return(0,a.iH)(this.database,"notifications/"+e)}getNotificationsData(){return(0,a.IO)((0,a.iH)(this.database,"notifications/"),(0,a.g2)("read"),(0,a.EW)(!1))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C(n,s){if(1&n&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()()),2&n){const e=s.$implicit;t.xp6(4),t.Oqu(e.content),t.xp6(2),t.Oqu(e.created_at)}}function P(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-list")(1,"ion-card",9)(2,"ion-card-header")(3,"ion-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"ion-card-subtitle"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"ion-card-content")(9,"h5"),t._uU(10),t.qZA(),t.TgZ(11,"div",10)(12,"span"),t._UZ(13,"ion-icon",11),t._uU(14),t.qZA(),t.TgZ(15,"span")(16,"ion-button",12),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.like(r.id))}),t.TgZ(17,"ion-icon",13),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.like(r.id))}),t.qZA()(),t.TgZ(18,"ion-button",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.dislike(r.id))}),t._UZ(19,"ion-icon",15),t.qZA()()()(),t.TgZ(20,"ion-accordion-group")(21,"ion-accordion",16)(22,"ion-item",17)(23,"ion-label"),t._uU(24,"Comments"),t.qZA()(),t.TgZ(25,"div",18)(26,"div",19)(27,"ion-input",20),t.NdJ("ngModelChange",function(c){const l=t.CHM(e).$implicit;return t.KtG(l.temperory_comment=c)}),t.qZA(),t.TgZ(28,"ion-button",21),t.NdJ("click",function(){const r=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.comment(r.id))}),t._uU(29,"Add"),t.qZA()(),t.YNc(30,C,7,2,"ion-list",8),t.qZA()()()()()}if(2&n){const e=s.$implicit,o=t.oxw();t.xp6(4),t.Oqu(e.title),t.xp6(2),t.hij(" ",t.xi3(7,9,e.created_at,"short")," "),t.xp6(4),t.hij(" ",e.content," "),t.xp6(3),t.Q6J("name",e.likes>0?"heart":"heart-dislike")("color",e.likes>0?"danger":"dark"),t.xp6(1),t.hij(" ",e.likes," "),t.xp6(13),t.Q6J("ngModel",e.temperory_comment),t.xp6(3),t.Q6J("ngForOf",e.comments)("ngForTrackBy",o.trackByFn)}}let k=(()=>{class n{constructor(e){this.service=e,this.posts=[],this.post={id:"",title:"",content:"",likes:0,created_at:(new Date).toLocaleString(),comments:[],temperory_comment:""},this.postsRef=this.service.getPostsData(),(0,a.jM)(this.postsRef,o=>{o.forEach(c=>{let r=this.posts.findIndex(l=>l.id===c.val().id);-1===r?this.posts.push(c.val()):this.posts[r]=c.val()})})}save(){""===this.post.title||""===this.post.content||(this.post.id=`${this.posts.length+1}`,this.posts.push(this.post),this.service.writePostData(this.post,"added"),this.cancel())}cancel(){this.post={id:"",title:"",content:"",likes:0,created_at:(new Date).toLocaleString(),comments:[],temperory_comment:""}}like(e){this.posts.filter(o=>o.id===e)[0].likes++,this.service.writePostData(this.posts.filter(o=>o.id===e)[0],"liked")}dislike(e){this.posts.filter(o=>o.id===e)[0].likes--,this.service.writePostData(this.posts.filter(o=>o.id===e)[0],"disliked")}comment(e){let o=this.posts.filter(c=>c.id===e)[0];""!==o.temperory_comment&&(void 0===o.comments&&(o.comments=[]),o.comments.push({id:`${o.id}-${o.comments.length+1}`,content:o.temperory_comment,created_at:(new Date).toLocaleString()}),o.temperory_comment="",this.service.writePostData(o,"commented"))}trackByFn(e,o){return o.id}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-post"]],decls:20,vars:4,consts:[["id","content"],["color","light"],["position","floating"],["color","dark","fill","outlined","type","text",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["expand","","color","success",3,"click"],["expand","","color","light",3,"click"],["id","posts-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["fill","outlined"],["id","likes-container"],["size","small",3,"name","color"],["fill","solid","color","danger","size","small",3,"click"],["name","heart","type","button","fill","solid",3,"click"],["fill","solid","color","medium","size","small",3,"click"],["name","heart-dislike","fill","solid"],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[2,"display","flex"],["placeholder","Add comment","color","dark","fill","outline",3,"ngModel","ngModelChange"],["color","success",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"ion-card",1)(2,"ion-card-header")(3,"ion-card-title"),t._uU(4,"Add new post"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item")(7,"ion-label",2),t._uU(8,"Title"),t.qZA(),t.TgZ(9,"ion-input",3),t.NdJ("ngModelChange",function(r){return o.post.title=r}),t.qZA()(),t.TgZ(10,"ion-item")(11,"ion-label",2),t._uU(12,"Content"),t.qZA(),t.TgZ(13,"ion-textarea",4),t.NdJ("ngModelChange",function(r){return o.post.content=r}),t.qZA()()(),t.TgZ(14,"ion-button",5),t.NdJ("click",function(){return o.save()}),t._uU(15,"Save"),t.qZA(),t.TgZ(16,"ion-button",6),t.NdJ("click",function(){return o.cancel()}),t._uU(17,"Cancel"),t.qZA()(),t.TgZ(18,"div",7),t.YNc(19,P,31,12,"ion-list",8),t.qZA()()),2&e&&(t.xp6(9),t.Q6J("ngModel",o.post.title),t.xp6(4),t.Q6J("ngModel",o.post.content),t.xp6(6),t.Q6J("ngForOf",o.posts)("ngForTrackBy",o.trackByFn))},dependencies:[p.sg,u.JJ,u.On,i.We,i.eh,i.YG,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.gu,i.pK,i.Ie,i.Q$,i.q_,i.g2,i.j9,p.uU],styles:["#posts-list[_ngcontent-%COMP%]{max-width:70%;justify-self:center;margin:0 auto}#likes-container[_ngcontent-%COMP%]{align-self:center;justify-self:center;display:flex;justify-content:space-between;align-items:center}span[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{font-size:30px}#likes-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#likes-container[_ngcontent-%COMP%]   ion-icon.liked[_ngcontent-%COMP%]{color:red}#likes-container[_ngcontent-%COMP%]   ion-icon.unliked[_ngcontent-%COMP%]{color:#000}#likes-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{justify-self:center;display:flex}"]}),n})();function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"ion-button",7),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.setNotificationsToRead())}),t._uU(1,"Mark all as read"),t.qZA()}}function Z(n,s){if(1&n&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()()),2&n){const e=s.$implicit;t.xp6(4),t.Oqu(e.message),t.xp6(2),t.Oqu(e.created_at)}}const x=[{path:"",component:(()=>{class n{constructor(e){this.service=e,this.notificationsRef=this.service.getNotificationsData(),this.notifications=[],this.service.getNotificationsData(),(0,a.jM)(this.notificationsRef,o=>{this.notifications=[],o.forEach(c=>{this.notifications.push(c.val())})})}setNotificationsToRead(){this.notifications.forEach(e=>{this.service.setNotificationRead(e.id)})}trackByFn(e,o){return o.id}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:15,vars:6,consts:[[3,"translucent"],[3,"fullscreen"],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["expand","block",3,"click",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["expand","block",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3," FedniPost "),t.qZA()()(),t.TgZ(4,"ion-content",1)(5,"ion-accordion-group")(6,"ion-accordion",2)(7,"ion-item",3)(8,"ion-label"),t._uU(9),t.qZA()(),t.TgZ(10,"div",4)(11,"div"),t.YNc(12,M,2,0,"ion-button",5),t.qZA(),t.YNc(13,Z,7,2,"ion-list",6),t.qZA()()(),t._UZ(14,"app-post"),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(5),t.hij("Notifications ",o.notifications.length,""),t.xp6(3),t.Q6J("ngIf",o.notifications.length>0),t.xp6(1),t.Q6J("ngForOf",o.notifications)("ngForTrackBy",o.trackByFn))},dependencies:[p.sg,p.O5,i.We,i.eh,i.YG,i.W2,i.Gu,i.Ie,i.Q$,i.q_,i.wd,i.sr,k],styles:["#container[_ngcontent-%COMP%]{text-align:center;color:#333;margin:0 auto}#posts-list[_ngcontent-%COMP%]{max-width:90%;justify-self:center;margin:0 auto}#likes-container[_ngcontent-%COMP%]{align-self:center;justify-self:center;display:flex;justify-content:space-between;align-items:center}span[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{font-size:30px}#likes-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#likes-container[_ngcontent-%COMP%]   ion-icon.liked[_ngcontent-%COMP%]{color:red}#likes-container[_ngcontent-%COMP%]   ion-icon.unliked[_ngcontent-%COMP%]{color:#000}#likes-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{justify-self:center;display:flex}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(x),m.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,u.u5,i.Pc]}),n})(),v=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,u.u5,i.Pc,T,y]}),n})()}}]);