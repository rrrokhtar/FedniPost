"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9307],{9307:(x,m,a)=>{a.r(m),a.d(m,{HomePageModule:()=>Z});var p=a(6895),i=a(5035),d=a(433),u=a(2598),t=a(8256),g=a(6551),_=a(6480);function f(e,s){if(1&e&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()()),2&e){const n=s.$implicit;t.xp6(4),t.Oqu(n.content),t.xp6(2),t.Oqu(n.created_at)}}function C(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"ion-list")(1,"ion-card",9)(2,"ion-card-header")(3,"ion-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"ion-card-subtitle"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"ion-card-content")(9,"h5"),t._uU(10),t.qZA(),t.TgZ(11,"div",10)(12,"span"),t._UZ(13,"ion-icon",11),t._uU(14),t.qZA(),t.TgZ(15,"span")(16,"ion-button",12),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.like(l.id))}),t.TgZ(17,"ion-icon",13),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.like(l.id))}),t.qZA()(),t.TgZ(18,"ion-button",14),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.dislike(l.id))}),t._UZ(19,"ion-icon",15),t.qZA()()()(),t.TgZ(20,"ion-accordion-group")(21,"ion-accordion",16)(22,"ion-item",17)(23,"ion-label"),t._uU(24,"Comments"),t.qZA()(),t.TgZ(25,"div",18)(26,"div",19)(27,"ion-input",20),t.NdJ("ngModelChange",function(c){const r=t.CHM(n).$implicit;return t.KtG(r.temperory_comment=c)}),t.qZA(),t.TgZ(28,"ion-button",21),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.comment(l.id))}),t._uU(29,"Add"),t.qZA()(),t.YNc(30,f,7,2,"ion-list",8),t.qZA()()()()()}if(2&e){const n=s.$implicit,o=t.oxw();t.xp6(4),t.Oqu(n.title),t.xp6(2),t.hij(" ",t.xi3(7,9,n.created_at,"short")," "),t.xp6(4),t.hij(" ",n.content," "),t.xp6(3),t.Q6J("name",n.likes>0?"heart":"heart-dislike")("color",n.likes>0?"danger":"dark"),t.xp6(1),t.hij(" ",n.likes," "),t.xp6(13),t.Q6J("ngModel",n.temperory_comment),t.xp6(3),t.Q6J("ngForOf",n.comments)("ngForTrackBy",o.trackByFn)}}let h=(()=>{class e{constructor(n){this.service=n,this.posts=[],this.post={id:"",title:"",content:"",likes:0,created_at:(new Date).toLocaleString(),comments:[],temperory_comment:""},this.postsRef=this.service.getPostsData(),(0,g.jM)(this.postsRef,o=>{o.forEach(c=>{let l=this.posts.findIndex(r=>r.id===c.val().id);-1===l?this.posts.push(c.val()):this.posts[l]=c.val()})})}save(){""===this.post.title||""===this.post.content||(this.post.id=`${this.posts.length+1}`,this.posts.push(this.post),this.service.writePostData(this.post),this.cancel())}cancel(){this.post={id:"",title:"",content:"",likes:0,created_at:(new Date).toLocaleString(),comments:[],temperory_comment:""}}like(n){this.posts.filter(o=>o.id===n)[0].likes++,this.service.writePostData(this.posts.filter(o=>o.id===n)[0])}dislike(n){this.posts.filter(o=>o.id===n)[0].likes--,this.service.writePostData(this.posts.filter(o=>o.id===n)[0])}comment(n){let o=this.posts.filter(c=>c.id===n)[0];""!==o.temperory_comment&&(void 0===o.comments&&(o.comments=[]),o.comments.push({id:`${o.id}-${o.comments.length+1}`,content:o.temperory_comment,created_at:(new Date).toLocaleString()}),o.temperory_comment="",this.service.writePostData(o))}trackByFn(n,o){return o.id}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(_.L))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-post"]],decls:20,vars:4,consts:[["id","content"],["color","light"],["position","floating"],["color","dark","fill","outlined","type","text",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["expand","","color","success",3,"click"],["expand","","color","light",3,"click"],["id","posts-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["fill","outlined"],["id","likes-container"],["size","small",3,"name","color"],["fill","solid","color","danger","size","small",3,"click"],["name","heart","type","button","fill","solid",3,"click"],["fill","solid","color","medium","size","small",3,"click"],["name","heart-dislike","fill","solid"],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[2,"display","flex"],["placeholder","Add comment","color","dark","fill","outline",3,"ngModel","ngModelChange"],["color","success",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"ion-card",1)(2,"ion-card-header")(3,"ion-card-title"),t._uU(4,"Add new post"),t.qZA()(),t.TgZ(5,"ion-card-content")(6,"ion-item")(7,"ion-label",2),t._uU(8,"Title"),t.qZA(),t.TgZ(9,"ion-input",3),t.NdJ("ngModelChange",function(l){return o.post.title=l}),t.qZA()(),t.TgZ(10,"ion-item")(11,"ion-label",2),t._uU(12,"Content"),t.qZA(),t.TgZ(13,"ion-textarea",4),t.NdJ("ngModelChange",function(l){return o.post.content=l}),t.qZA()()(),t.TgZ(14,"ion-button",5),t.NdJ("click",function(){return o.save()}),t._uU(15,"Save"),t.qZA(),t.TgZ(16,"ion-button",6),t.NdJ("click",function(){return o.cancel()}),t._uU(17,"Cancel"),t.qZA()(),t.TgZ(18,"div",7),t.YNc(19,C,31,12,"ion-list",8),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("ngModel",o.post.title),t.xp6(4),t.Q6J("ngModel",o.post.content),t.xp6(6),t.Q6J("ngForOf",o.posts)("ngForTrackBy",o.trackByFn))},dependencies:[p.sg,d.JJ,d.On,i.We,i.eh,i.YG,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.gu,i.pK,i.Ie,i.Q$,i.q_,i.g2,i.j9,p.uU],styles:["#posts-list[_ngcontent-%COMP%]{max-width:70%;justify-self:center;margin:0 auto}#likes-container[_ngcontent-%COMP%]{align-self:center;justify-self:center;display:flex;justify-content:space-between;align-items:center}span[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{font-size:30px}#likes-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#likes-container[_ngcontent-%COMP%]   ion-icon.liked[_ngcontent-%COMP%]{color:red}#likes-container[_ngcontent-%COMP%]   ion-icon.unliked[_ngcontent-%COMP%]{color:#000}#likes-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{justify-self:center;display:flex}"]}),e})();const P=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:6,vars:2,consts:[[3,"translucent"],[3,"fullscreen"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3," FedniPost "),t.qZA()()(),t.TgZ(4,"ion-content",1),t._UZ(5,"app-post"),t.qZA()),2&n&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0))},dependencies:[i.W2,i.Gu,i.wd,i.sr,h],styles:["#container[_ngcontent-%COMP%]{text-align:center;color:#333;margin:0 auto}#posts-list[_ngcontent-%COMP%]{max-width:90%;justify-self:center;margin:0 auto}#likes-container[_ngcontent-%COMP%]{align-self:center;justify-self:center;display:flex;justify-content:space-between;align-items:center}span[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{font-size:30px}#likes-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#likes-container[_ngcontent-%COMP%]   ion-icon.liked[_ngcontent-%COMP%]{color:red}#likes-container[_ngcontent-%COMP%]   ion-icon.unliked[_ngcontent-%COMP%]{color:#000}#likes-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{justify-self:center;display:flex}"]}),e})()}];let M=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(P),u.Bz]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,d.u5,i.Pc]}),e})(),Z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,d.u5,i.Pc,M,k]}),e})()}}]);