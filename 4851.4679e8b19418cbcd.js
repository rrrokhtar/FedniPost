"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4851],{4851:(C,g,a)=>{a.r(g),a.d(g,{HomePageModule:()=>P});var d=a(6895),i=a(5035),m=a(433),p=a(2598),u=a(6551),t=a(8256),_=a(9859);function f(o,r){if(1&o&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label")(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()()()()),2&o){const e=r.$implicit;t.xp6(4),t.Oqu(e.content),t.xp6(2),t.Oqu(e.created_at)}}function h(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-list")(1,"ion-card",12)(2,"ion-card-header")(3,"ion-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"ion-card-subtitle"),t._uU(6),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"ion-card-content")(9,"h5"),t._uU(10),t.qZA(),t.TgZ(11,"div",13)(12,"span"),t._UZ(13,"ion-icon",14),t._uU(14),t.qZA(),t.TgZ(15,"span")(16,"ion-button",15),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.like(c.id))}),t.TgZ(17,"ion-icon",16),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.like(c.id))}),t.qZA()(),t.TgZ(18,"ion-button",17),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.dislike(c.id))}),t._UZ(19,"ion-icon",18),t.qZA()()()(),t.TgZ(20,"ion-accordion-group")(21,"ion-accordion",19)(22,"ion-item",20)(23,"ion-label"),t._uU(24,"Comments"),t.qZA()(),t.TgZ(25,"div",21)(26,"div",22)(27,"ion-input",23),t.NdJ("ngModelChange",function(s){const l=t.CHM(e).$implicit;return t.KtG(l.temperory_comment=s)}),t.qZA(),t.TgZ(28,"ion-button",24),t.NdJ("click",function(){const c=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.comment(c.id))}),t._uU(29,"Add"),t.qZA()(),t.YNc(30,f,7,2,"ion-list",11),t.qZA()()()()()}if(2&o){const e=r.$implicit,n=t.oxw();t.xp6(4),t.Oqu(e.title),t.xp6(2),t.hij(" ",t.xi3(7,9,e.created_at,"short")," "),t.xp6(4),t.hij(" ",e.content," "),t.xp6(3),t.Q6J("name",e.likes>0?"heart":"heart-dislike")("color",e.likes>0?"danger":"dark"),t.xp6(1),t.hij(" ",e.likes," "),t.xp6(13),t.Q6J("ngModel",e.temperory_comment),t.xp6(3),t.Q6J("ngForOf",e.comments)("ngForTrackBy",n.trackByFn)}}const k=[{path:"",component:(()=>{class o{constructor(e){this.service=e,this.posts=[],this.post={id:"",title:"",content:"",likes:0,created_at:(new Date).toLocaleString(),comments:[],temperory_comment:""},this.postsRef=this.service.getPostsData(),(0,u.jM)(this.postsRef,n=>{n.forEach(s=>{let c=this.posts.findIndex(l=>l.id===s.val().id);-1===c?this.posts.push(s.val()):this.posts[c]=s.val()})})}save(){""===this.post.title||""===this.post.content||(this.post.id=`${this.posts.length+1}`,this.posts.push(this.post),this.service.writePostData(this.post),this.cancel())}cancel(){this.post={id:"",title:"",content:"",likes:0,created_at:(new Date).toLocaleString(),comments:[],temperory_comment:""}}like(e){this.posts.filter(n=>n.id===e)[0].likes++,this.service.writePostData(this.posts.filter(n=>n.id===e)[0])}dislike(e){this.posts.filter(n=>n.id===e)[0].likes--,this.service.writePostData(this.posts.filter(n=>n.id===e)[0])}comment(e){let n=this.posts.filter(s=>s.id===e)[0];""!==n.temperory_comment&&(void 0===n.comments&&(n.comments=[]),n.comments.push({id:`${n.id}-${n.comments.length+1}`,content:n.temperory_comment,created_at:(new Date).toLocaleString()}),n.temperory_comment="",this.service.writePostData(n))}trackByFn(e,n){return n.id}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:26,vars:6,consts:[[3,"translucent"],[3,"fullscreen"],["id","container"],["id","content"],["color","light"],["position","floating"],["color","dark","fill","outlined","type","text",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["expand","","color","success",3,"click"],["expand","","color","light",3,"click"],["id","posts-list"],[4,"ngFor","ngForOf","ngForTrackBy"],["fill","outlined"],["id","likes-container"],["size","small",3,"name","color"],["fill","solid","color","danger","size","small",3,"click"],["name","heart","type","button","fill","solid",3,"click"],["fill","solid","color","medium","size","small",3,"click"],["name","heart-dislike","fill","solid"],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[2,"display","flex"],["placeholder","Add comment","color","dark","fill","outline",3,"ngModel","ngModelChange"],["color","success",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3," FedniPost "),t.qZA()()(),t.TgZ(4,"ion-content",1)(5,"div",2)(6,"div",3)(7,"ion-card",4)(8,"ion-card-header")(9,"ion-card-title"),t._uU(10,"Add new post"),t.qZA()(),t.TgZ(11,"ion-card-content")(12,"ion-item")(13,"ion-label",5),t._uU(14,"Title"),t.qZA(),t.TgZ(15,"ion-input",6),t.NdJ("ngModelChange",function(c){return n.post.title=c}),t.qZA()(),t.TgZ(16,"ion-item")(17,"ion-label",5),t._uU(18,"Content"),t.qZA(),t.TgZ(19,"ion-textarea",7),t.NdJ("ngModelChange",function(c){return n.post.content=c}),t.qZA()()(),t.TgZ(20,"ion-button",8),t.NdJ("click",function(){return n.save()}),t._uU(21,"Save"),t.qZA(),t.TgZ(22,"ion-button",9),t.NdJ("click",function(){return n.cancel()}),t._uU(23,"Cancel"),t.qZA()()(),t.TgZ(24,"div",10),t.YNc(25,h,31,12,"ion-list",11),t.qZA()()()),2&e&&(t.Q6J("translucent",!0),t.xp6(4),t.Q6J("fullscreen",!0),t.xp6(11),t.Q6J("ngModel",n.post.title),t.xp6(4),t.Q6J("ngModel",n.post.content),t.xp6(6),t.Q6J("ngForOf",n.posts)("ngForTrackBy",n.trackByFn))},dependencies:[d.sg,m.JJ,m.On,i.We,i.eh,i.YG,i.PM,i.FN,i.Zi,i.tO,i.Dq,i.W2,i.Gu,i.gu,i.pK,i.Ie,i.Q$,i.q_,i.g2,i.wd,i.sr,i.j9,d.uU],styles:["#container[_ngcontent-%COMP%]{text-align:center;color:#333;width:100%;margin:0 auto}#posts-list[_ngcontent-%COMP%]{max-width:90%;justify-self:center;margin:0 auto}#likes-container[_ngcontent-%COMP%]{align-self:center;justify-self:center;display:flex;justify-content:space-between;align-items:center}span[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{font-size:30px}#likes-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]:hover{cursor:pointer}#likes-container[_ngcontent-%COMP%]   ion-icon.liked[_ngcontent-%COMP%]{color:red}#likes-container[_ngcontent-%COMP%]   ion-icon.unliked[_ngcontent-%COMP%]{color:#000}#likes-container[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{justify-self:center;display:flex}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.Bz.forChild(k),p.Bz]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,m.u5,i.Pc,Z]}),o})()}}]);